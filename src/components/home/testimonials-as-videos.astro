---
const slides = [
    { image: "/thumbnail/thumbnail-1.webp" },
    { image: "/thumbnail/thumbnail-2.webp" },
    { image: "/thumbnail/thumbnail-3.webp" },
];
---
<section id="testimonials-as-videos" class="videos section">
    <!-- Section Title -->
    <div class="container section-title">
      <h2>Avis</h2>
      <div>
        <span>Ils témoignent</span>
        <span class="description-title">de notre impact</span>
      </div>
    </div>
  
    <!-- Slider -->
    <div class="container">
      <div class="row align-items-center gy-4">
        <div class="col-lg-4">
          <div class="video-slider position-relative">
            <div class="slides">
              <div class="slide active">
                <div class="video-wrapper position-relative">
                  <img
                    src="/thumbnail/thumbnail-1.webp"
                    class="img-fluid"
                    alt="thumbnail-1 - Brosmedia"
                    loading="lazy"
                  />
                  <div class="play-icon"></div>
                </div>
              </div>
              <div class="slide">
                <div class="video-wrapper position-relative">
                  <img
                    src="/thumbnail/thumbnail-2.webp"
                    class="img-fluid"
                    alt="thumbnail-2 - Brosmedia"
                    loading="lazy"
                  />
                  <div class="play-icon"></div>
                </div>
              </div>
              <div class="slide">
                <div class="video-wrapper position-relative">
                  <img
                    src="/thumbnail/thumbnail-3.webp"
                    class="img-fluid"
                    alt="thumbnail-3 - Brosmedia"
                    loading="lazy"
                  />
                  <div class="play-icon"></div>
                </div>
              </div>
            </div>
  
            <!-- Navigation buttons -->
            <button class="slider-btn prev-btn" aria-label="Previous slide">
              <i class="bi bi-chevron-left"></i>
            </button>
            <button class="slider-btn next-btn" aria-label="Next slide">
              <i class="bi bi-chevron-right"></i>
            </button>
          </div>
        </div>
  
        <!-- Text -->
        <div class="col-lg-8">
          <div class="videos-section-content">
            <h2>L'impact de Brosmedia</h2>
            <p class="lead">
              Chez Brosmedia, chaque projet est une histoire de transformation.
              Grâce à notre approche personnalisée et humaine, nous aidons nos
              clients à franchir un cap dans leur présence digitale. Que ce soit
              par la création de sites web percutants, des campagnes marketing
              efficaces ou des vidéos publicitaires engageantes, nous contribuons
              concrètement à leur croissance.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>
  
  <style>
    .video-slider {
      position: relative;
      overflow: hidden;
      border-radius: 1rem;
    }
  
    .slides {
      display: flex;
      transition: transform 0.6s ease;
    }
  
    .slide {
      min-width: 100%;
      flex-shrink: 1;
      position: relative;
    }
  
    .video-wrapper {
      position: relative;
      border-radius: 1rem;
      overflow: hidden;
      cursor: pointer;
    }
  
    .video-wrapper img {
      display: block;
      width: 100%;
      height: auto;
      border-radius: 1rem;
      transition: transform 0.3s ease;
    }
  
    .video-wrapper:hover img {
      transform: scale(1.05);
    }
  
    /* Keep your original play button look */
    /* .play-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 70px;
      height: 70px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background 0.3s ease;
    }
  
    .play-icon::before {
      content: "";
      display: inline-block;
      width: 0;
      height: 0;
      border-left: 20px solid white;
      border-top: 12px solid transparent;
      border-bottom: 12px solid transparent;
      margin-left: 4px;
    } */
  
    /* .video-wrapper:hover .play-icon {
      background: rgba(0, 0, 0, 0.8);
    } */
  
    .slider-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      border: none;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.3s ease;
      z-index: 5;
    }
  
    .slider-btn:hover {
      background: rgba(0, 0, 0, 0.7);
    }
  
    .prev-btn {
      left: 10px;
    }
  
    .next-btn {
      right: 10px;
    }
  
    .slider-btn i {
      font-size: 1.2rem;
    }
  
    @media (max-width: 767px) {
      .slider-btn {
        width: 32px;
        height: 32px;
      }
  
      .play-icon {
        width: 50px;
        height: 50px;
      }
    }
  </style>
  
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const videoData = [
        { url: "https://www.videoask.com/f02f0r1ef" },
        { url: "https://www.videoask.com/fujo8ptxi" },
        { url: "https://www.videoask.com/fcstso7o3" },
      ];
  
      const slidesContainer = document.querySelector(".slides");
      const slides = document.querySelectorAll(".slide");
      const prevBtn = document.querySelector(".prev-btn");
      const nextBtn = document.querySelector(".next-btn");
      let currentIndex = 0;
  
      function showSlide(index) {
        slidesContainer.style.transform = `translateX(-${index * 100}%)`;
        restoreThumbnails();
      }
  
      prevBtn.addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        showSlide(currentIndex);
      });
  
      nextBtn.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % slides.length;
        showSlide(currentIndex);
      });
  
      // Play video on click
      document.addEventListener("click", (e) => {
        const wrapper = e.target.closest(".video-wrapper");
        if (wrapper) playVideo(wrapper);
      });
  
      function playVideo(wrapper) {
        const slide = wrapper.closest(".slide");
        const index = Array.from(slides).indexOf(slide);
        const videoUrl = videoData[index]?.url;
        if (!videoUrl) return;
  
        wrapper.innerHTML = `
          <iframe
            src="${videoUrl}?autoplay=1"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
            frameborder="0"
            style="width:100%;height:100%;border:none;aspect-ratio:3/4"
          ></iframe>
        `;
      }
  
      function restoreThumbnails() {
        slides.forEach((slide, i) => {
          const wrapper = slide.querySelector(".video-wrapper");
          if (wrapper && !wrapper.querySelector("img")) {
            wrapper.innerHTML = `
              <img src="/thumbnail/thumbnail-${i + 1}.webp" class="img-fluid" alt="thumbnail-${i + 1} - Brosmedia" loading="lazy" />
              <div class="play-icon"></div>
            `;
          }
        });
      }
    });
  </script>
  